package com.lng.tools;

import javax.servlet.ServletRequest;
import javax.servlet.http.HttpServletRequest;

public class CommonTools {

	/**
	 * 获取当前网址
	 * @param request
	 * @return
	 */
	public static String getWebAddress(ServletRequest request){
		String xyType = request.getScheme();
		String ym = request.getServerName();
		Integer dkh = request.getServerPort();
		String dkhChi = dkh.equals(80) ? "" : ":" + dkh;
		return xyType + "://" +  ym + dkhChi;
	}
	
	/**
	 * 获取客户端信息（上述2种方法的整合）分清安卓、ios、pc、移动浏览器
	 * @param request
	 * @return
	 */
	public static String getCilentInfo_new(HttpServletRequest request){
		String clientInfo = request.getHeader("User-agent");
		String cilentQuip = "";
		if(clientInfo != null){
			if(clientInfo.indexOf("MicroMessenger") >= 0){//微信小程序
				cilentQuip = "wxApp";
			}else if(clientInfo.indexOf("Android") >= 0 || clientInfo.indexOf("iPad") >= 0 || clientInfo.indexOf("iPhone") >= 0){
				if(clientInfo.indexOf("AppleWebKit") > 0){//手机浏览器，手机app封装的html页面
					if(clientInfo.indexOf("Html5") > 0){
						cilentQuip = "commonApp";////手机app封装html页面
					}else{
						//cilentQuip = "pc";//移动端浏览器效果同于PC
						if(clientInfo.indexOf("Android") >= 0){//安卓手机浏览器
							cilentQuip = "andriodWeb";
						}else if(clientInfo.indexOf("iPad") >= 0 || clientInfo.indexOf("iPhone") >= 0){//苹果手机浏览器
							cilentQuip = "iphoneWeb";
						}
					}
				}else{
					if(clientInfo.indexOf("Android") >= 0){//移动端APP
						cilentQuip = "andriodApp";
					}else if(clientInfo.indexOf("iPad") >= 0 || clientInfo.indexOf("iPhone") >= 0){
						cilentQuip = "iphoneApp";
					}
				}
			}else if(clientInfo.indexOf("Lavf") >= 0){//手机端播放视频时
				cilentQuip = "commonApp";////手机app封装html页面
			}else{
				cilentQuip = "pc";//PC端
			}
		}else{
			cilentQuip = "";//无法获取客户端信息
		}
		return cilentQuip;
	}
}
